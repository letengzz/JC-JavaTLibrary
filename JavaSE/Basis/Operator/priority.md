# 运算优先级

![图片11](https://cdn.jsdelivr.net/gh/letengzz/Two-C@main/img/Java/%E5%9B%BE%E7%89%8711.png)

所有的数学运算都认为是**从左向右**运算的，Java 语言中**大部分运算符也是从左向右结合的**，只有单目运算符、赋值运算符和三目运算符例外，其中，单目运算符、赋值运算符和三目运算符是**从右向左**结合的，也就是从右向左运算。

乘法和加法是两个可结合的运算，也就是说，这两个运算符左右两边的操作数可以互换位置而不会影响结果。运算符有不同的优先级，所谓优先级就是在表达式运算中的运算顺序。

一般而言，单目运算符优先级较高，赋值运算符优先级较低。算术运算符优先级较高，关系和逻辑运算符优先级较低。多数运算符具有左结合性，单目运算符、三目运算符、赋值运算符具有右结合性。

Java 语言中运算符的优先级共分为 14 级，其中 1 级最高，14 级最低。在同一个表达式中运算符优先级高的先执行。

**所有的运算符的优先级以及结合性**：

![](https://cdn.jsdelivr.net/gh/letengzz/Two-C@main/img/Java/202209141403804.png)

使用优先级为 1 的小括号可以改变其他运算符的优先级，即如果需要将具有较低优先级的运算符先运算，则可以使用小括号将该运算符和操作符括起来。例如下面的表达式：

```java
(x-y)*z/5
```

在这个表达式中先进行括号内的减法运算，再将结果与 z 相乘，最后将积除以 5 得出结果。整个表达式的顺序按照从左向右执行，比较容易理解。

```java
--y || ++x && ++z;
```

这个表达式中包含了算术运算符和逻辑运算符。根据表 1 中列出的优先级，可以确定它的执行顺序如下：

1. 先计算 y 的自减运算符，即 `--y`。
2. 再计算 x 的自增运算符，即 `++x`。
3. 接着计算 z 的自增运算符，即 `++z`。
4. 由于逻辑与比逻辑或的优先级高，这里将 ② 和 ③ 的结果进行逻辑与运算，即 `++x && ++z`。
5. 最后将 ④ 的结果与 ① 进行逻辑或运算，即 `--y||++x&&++z`。

如果没有上述对该表达式执行顺序的说明，第一眼看到它时将很难识别优先级。对于这类问题，可以通过添加小括号使表达的顺序更加清晰，而不用去查优先级表：

```java
(--y)||((++x)&&(++z));
```

**注意**：

- 不要把一个表达式写得过于复杂，如果一个表达式过于复杂，则把它分成几步来完成。
- 不要过多地依赖运算符的优先级来控制表达式的执行顺序，这样可读性太差，尽量使用`(` `)`来控制表达式的执行顺序。
- 源代码就是一份文档，源代码的可读性比代码运行效率更重要。
